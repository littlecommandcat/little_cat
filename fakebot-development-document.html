<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>分身機器人開發文檔</title>

  <meta name="description" content="小喵喵是一款強大的 Discord 機器人，支援音樂播放、管理功能、客服單與安全系統。" />
  <meta name="keywords" content="小喵喵, Discord 機器人, Discord Bot, 音樂機器人" />
  <meta property="og:title" content="小喵喵分身機器人模組文檔" />
  <meta property="og:description" content="小喵喵分身機器人教學文檔" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="cat.png">
  <link rel="icon" href="cat.png" type="image/x-icon" />

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="style/document.css">
</head>
<body>
  <header>

    <div class="container header-container">
      <div class="logo">
          <img src="cat.png" alt="小喵喵 Logo" style="height: 40px; vertical-align: middle;">
          <span style="margin-left: 8px; vertical-align: middle;">分身機器人文檔</span>
      </div>
      <nav>
        <ul>
          <li><a href="index.html">主頁面</a></li>
          <li><a href="#syntax">核心語法</a></li>
          <li><a href="#control-flow">流程控制</a></li>
          <li><a href="#functions">函式定義</a></li>
          <li><a href="#method">方法介紹</a></li>
          <li><a href="#libs">內建庫</a></li>
          <li><a href="#example">完整範例</a></li>
          <li><a href="fakebot-function-generator.html">生成器</a></li>
          <li><a href="fakebot-example.html">公開範例</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <section class="hero container">
    <p>本頁面說明分身機器人簡易語言的語法規範、內置函數以及安全限制。<br>當前直譯器穩定版本為 <b>v4.1.0+</b>。</p>
  </section>

  <section id="syntax" class="container">
    <h2>核心結構 (Core Structure)</h2>
    <div class="code-block">
      <button class="copy-btn">複製</button>
      <pre><code>#load &lt;lib&gt; // 載入內建庫
begin; // 主程式開始
  try; // 嘗試區塊
    // 變數賦值
    val = 100;
    // 輸出結果 (必填)
    output {"結果是: " + val};
  except {error}; // 將錯誤訊息放進error變數
    output {"Error" + error}; // 用輸出而非錯誤訊息回傳以免意外終止程式
  // except; 不進行變數賦值
  endtry;
end; // 主程式結束</code></pre>
    </div>
    <table>
      <tr><th>指令/關鍵字</th><th>範例</th><th>說明</th></tr>
      <tr><td>#load</td><td>#load &lt;math&gt;</td><td>加載外部擴充庫（如 math, message)</td></tr>
      <tr><td>begin / end</td><td>begin; ... end;</td><td>定義程式執行的主區塊，需加分號</td></tr>
      <tr><td>output</td><td>output {content};</td><td>設定程式最終回傳內容，僅執行一次</td></tr>
      <tr><td>//</td><td>// 註解內容</td><td>單行註解，執行時會被忽略</td></tr>
      <tr><td>;</td><td>res = a + b;</td><td>指令結尾必須加上分號（結構關鍵字除外）</td></tr>
      <tr><td>try / except / endtry</td><td>try; ... except; ... endtry;</td><td>捕捉區塊內的錯誤且不使用意外終止程式</td></tr>
    </table>
  </section>

  <section id="control-flow" class="container">
    <h2>流程控制 (Control Flow)</h2>
    <p>支援條件判斷結構，讓腳本能根據不同情況做出反應。每個 <code>if</code> 區塊都必須以 <code>endif</code> 結尾。</p>

    <div class="code-block">
      <button class="copy-btn">複製</button>
      <pre><code>if {條件1};
  output {"情況 A"};
elif {條件2};
  output {"情況 B"};
else;
  output {"其他情況"};
endif;</code></pre>
    </div>

    <div class="code-block">
      <button class="copy-btn">複製</button>
      <pre><code>if {條件1 or 條件2}; // if {條件1 || 條件2};
  output {"情況 A"};
elif {條件3 and 條件4}; // elif {條件3 && 條件4};
  output {"情況 B"};
else;
  output {"其他情況"};
endif;</code></pre>
    </div>

    <div class="warning-card">
      <strong>⚠️ 條件判斷注意事項：</strong>
      <ul>
        <li><code>if</code> 與 <code>elif</code> 後方條件需要大括號包覆且結尾分號</li>
        <li>必須確保 <code>endif</code> 存在，否則直譯器將無法正確解析區塊邊界。</li>
        <li>條件運算支援變數值與比較運算 (<code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>) 。</li>
      </ul>
    </div>
  </section>

  <section id="functions" class="container">
    <h2>函式 (Function Definition)</h2>
    <p>使用 <code>func</code> 封裝重複邏輯。所有自定義函式必須定義在 <code>begin</code> 區塊之前。</p>
    
    <div class="grid">
      <div class="card code-block">
        <h3>函式定義語法</h3>
        <button class="copy-btn">複製</button>
        <pre><code>func &lt;名稱&gt; {參數1 參數2};
  res = 參數1 + 參數2;
  sendback {res}; 
endfunc;</code></pre>
      </div>
      <div class="card code-block">
        <h3>如何調用函式</h3>
        <button class="copy-btn">複製</button>
        <pre><code>begin;
  // 使用 call 關鍵字調用
  res = call &lt;名稱&gt;{10 20};
  output {res};
end;</code></pre>
      </div>
    </div>

    <div class="warning-card">
      <strong>⚠️ 函式規則與限制：</strong>
      <ul>
        <li><b>位置：</b>必須寫在腳本上方（<code>#load</code> 之後，<code>begin</code> 之前）。</li>
        <li><b>參數：</b>置於 <code>{}</code> 中，彼此以<b>空格</b>分隔。</li>
        <li><b>回傳：</b>必須使用 <code>sendback {值};</code> 傳回結果。</li>
        <li><b>嚴格禁止：</b>在 <code>func</code> 區塊內使用 <code>wait</code> 指令。</li>
      </ul>
    </div>
  </section>

  <section id="method" class="container">
    <h2>方法 (Method)</h2>
    <p>使用 <code>method</code> 封裝應用邏輯。<b>不可由使用者自訂。</b></p>
      <div class="card code-block">
        <h3>如何調用方法</h3>
        <button class="copy-btn">複製</button>
        <pre><code>begin;
  // 不須使用 call 關鍵字調用
  wait{0.2}; // 等待0.2秒
  val1 = min{1 2}; // 取兩者最小值
  val2 = max{1 2}; // 取兩者最大值
  val3 = abs{-5}; // 取數值之絕對值
  output {}; // 必要輸出
end;</code></pre>
      </div>
    </div>

    <div class="warning-card">
      <strong>⚠️ 方法規則與限制：</strong>
      <ul>
        <li><b>參數：</b>置於 <code>{}</code> 中，彼此以<b>空格</b>分隔。</li>
        <li><b>回傳：</b>依照各方法規定。</li>
        <li><b>嚴格禁止：</b>在 <code>method</code> 呼喚不可使用 <code>call</code> 。</li>
      </ul>
    </div>
  </section>


  <section id="libs" class="container">
    <h2>內建庫與函數註冊</h2>
    <table>
      <tr><th>類別</th><th>函數/屬性</th><th>回傳型態</th><th>類型</th><th>說明</th></tr>
      <tr><td rowspan="4">
        <b>math lib</b>
          </td><td>math.pi / math.e</td><td>float</td><td>variable</td><td>圓周率與自然常數</td></tr>
          <tr><td>math.add{a b}</td><td>float</td><td><a href="#functions">function</a></td><td>回傳 a + b 的結果</td></tr>
          <tr><td>math.multiple{a b}</td><td>float</td><td><a href="#functions">function</a></td><td>回傳 a * b 的結果</td></tr>
          <tr><td>math.subtruct{a b}</td><td>float</td><td><a href="#functions">function</a></td><td>回傳 a - b 的結果</td></tr>
      <tr><td rowspan="7">
        <b>message lib</b>
          </td><td>message.username</td><td>str</td><td>variable</td><td>訊息作者名稱</td></tr>
          <tr><td>message.userid</td><td>int</td><td>variable</td><td>訊息作者 ID</td></tr>
          <tr><td>message.id</td><td>int</td><td>variable</td><td>訊息 ID</td></tr>
          <tr><td>message.content</td><td>str</td><td>variable</td><td>觸發程式的訊息內容</td></tr>
          <tr><td>message.createat</td><td>float</td><td>variable</td><td>訊息發送時間</td></tr>
          <tr><td>message.prefix</td><td>str</td><td>variable</td><td>指令前綴字</td></tr>
          <tr><td>message.command</td><td>str</td><td>variable</td><td>指令名稱</td></tr>
      <tr><td rowspan="2">
        <b>requests lib</b>
          </td><td>requests.get{url headers params}</td><td>data</td><td><a href="#functions">function</a></td><td>進行get並附帶headers和params</td></tr>
          <tr><td>requests.post{url headers json}</td><td>data</td><td><a href="#functions">function</a></td><td>進行post並附帶headers和json</td></tr>
      <tr><td rowspan="2">
        <b>time lib</b>
          </td><td>time.timestamp</td><td>float</td><td>variable</td><td>取得目前的timestamp</td></tr>
          <tr><td>time.asctime</td><td>str</td><td>variable</td><td>取得目前的asctime</td></tr>
      <tr><td rowspan="6">
        <b>list</b>
          </td><td>list.add{list val}</td><td>none</td><td><a href="#method">method</a></td><td>在列表末尾新增一個元素</td></tr>
          <tr><td>list.pop{list idx}</td><td>none</td><td><a href="#method">method</a></td><td>移除並回傳指定索引的元素</td></tr>
          <tr><td>list.get{list idx}</td><td>any</td><td><a href="#method">method</a></td><td>取得指定索引的元素內容</td></tr>
          <tr><td>list.count{list str}</td><td>int</td><td><a href="#method">method</a></td><td>取得指定元素的數量</td></tr>
          <tr><td>list.length{list}</td><td>int</td><td><a href="#method">method</a></td><td>取得列表總長度</td></tr>
          <tr><td>list.random{list n}</td><td>list</td><td><a href="#method">method</a></td><td>隨機抽取 n 個元素 (n 可省略)</td></tr>
      <tr><td rowspan="7">
        <b>dict</b>
          </td><td>dict.set{dict key item}</td><td>none</td><td><a href="#method">method</a></td><td>在字典設定 key: items</td></tr>
          </td><td>dict.clear{dict}</td><td>none</td><td><a href="#method">method</a></td><td>清除整個字典</td></tr>
          <tr><td>dict.get{dict key}</td><td>any</td><td><a href="#method">method</a></td><td>回傳指定key的item</td></tr>
          <tr><td>dict.length{dict}</td><td>int</td><td><a href="#method">method</a></td><td>回傳字典長度</td></tr>
          <tr><td>dict.randomkeys{dict n}</td><td>any</td><td><a href="#method">method</a></td><td>隨機從key抽取 n 個元素 (n 可省略)</td></tr>
          <tr><td>dict.randomitems{dict n}</td><td>any</td><td><a href="#method">method</a></td><td>隨機從item抽取 n 個元素 (n 可省略)</td></tr>
          <tr><td>dict.del{dict key}</td><td>any</td><td><a href="#method">method</a></td><td>刪除指定key</td></tr>
      <tr><td rowspan="4">
        <b>string</b>
          </td><td>str.upper{text}</td><td>str</td><td><a href="#method">method</a></td><td>轉為全大寫</td></tr>
          <tr><td>str.lower{text}</td><td>str</td><td><a href="#method">method</a></td><td>轉為全小寫</td></tr>
          <tr><td>str.title{text}</td><td>str</td><td><a href="#method">method</a></td><td>開頭轉為大寫</td></tr>
          <tr><td>str.length{text}</td><td>int</td><td><a href="#method">method</a></td><td>計算字串長度</td></tr>
          <tr><td>str.replace{text a b}</td><td>list</td><td><a href="#method">method</a></td><td>以指定文字a取代文字b</td></tr>
          <tr><td>str.split{text sep}</td><td>list</td><td><a href="#method">method</a></td><td>以指定字串分割文字</td></tr>
      <tr><td rowspan="7">
        <b>system (buildin)</b>
          </td><td>turntype{val type}</td><td>any</td><td><a href="#method">method</a></td><td>轉換型態 (str, int, float, list)</td></tr>
          <tr><td>type{val}</td><td>str</td><td><a href="#method">method</a></td><td>確認變數型態</td></tr>
          <tr><td>wait{time}</td><td>none</td><td><a href="#method">method</a></td><td>暫停執行 (限制 0.1 ~ 0.5 秒)</td></tr>
          <tr><td>min{val val}</td><td>float</td><td><a href="#method">method</a></td><td>取兩者最小值</td></tr>
          <tr><td>max{val val}</td><td>float</td><td><a href="#method">method</a></td><td>取兩者最大值</td></tr>
          <tr><td>abs{val}</td><td>float</td><td><a href="#method">method</a></td><td>取數值之絕對值</td></tr>
          <tr><td>round{val val}</td><td>float</td><td><a href="#method">method</a></td><td>取數值val後五捨六入</td></tr>
    </table>
  </section>

  <section id="constraints" class="container">
    <h2>運行安全性驗證 (Constraints)</h2>
    <div class="warning-card">
      <strong>⚠️ 資源與安全限制：</strong>
      <ul>
        <li><b>等待限制：</b>單個程式內 <code>wait</code> 指令不得超過 4 次。</li>
        <li><b>迴圈結構：</b><code>for</code> 總數上限 3 個，最大巢狀深度為 2 層。</li>
        <li><b>迭代次數：</b>單次 <code>for</code> 迴圈迭代次數上限為 5 次。</li>
        <li><b>語法嚴謹：</b>遺漏分號 <code>;</code> 或關鍵字邊界將導致直譯器報錯並中止執行。</li>
        <li><b>特殊語法：</b>字串相加、列出lib內容(&lt;lib&gt;.variables &lt;lib&gt;.functions)、字串可用\n換行</li>
        <li><b>嚴格賦值：</b>某些語法僅接受在外側定義後再傳入。<b>Dict type不可用預設值定義。</b></li>
      </ul>
    </div>
  </section>

  <section id="example" class="container">
    <h2>完整程式範例</h2>
    <div class="code-block">
      <button class="copy-btn">複製</button>
      <pre><code>#load &lt;time&gt;
#load &lt;message&gt;

func welcome {name};
  res = "你好, " + name;
  sendback {res};
endfunc;

begin;
  user = message.username;
  greet = call welcome{user};
      
  for i in 3;
    nowstamp = round{time.timestamp 0};
    output_msg = greet + " 第 " + i + " 次打招呼\n現在的timestamp是:" + nowtimestamp;
  endfor;
      
  output {output_msg};
end;</code></pre>
    </div>
  </section>

  <section id="invite" class="cta">
    <h2>準備好開始使用了嗎？</h2>
    <a href="fakebot-function-generator.html">
      <button class="btn-primary">生成器</button>
    </a>
    <a href="fakebot-example.html">
      <button class="btn-primary">公開範例</button>
    </a>
  </section>


  <footer>
    <p>© 2026 小喵喵 Discord Bot. All rights reserved.</p>
  </footer>

  <script src="script/redirect.js"></script>
  <script src="script/copy.js"></script>
</body>
</html>